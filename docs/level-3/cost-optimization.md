---
sidebar_position: 5
title: 비용 최적화
description: Claude Code 사용 비용을 줄이면서 생산성을 유지하는 실전 전략을 배웁니다.
---

# 비용 최적화

Claude Code는 강력하지만, 무분별하게 사용하면 비용이 빠르게 증가합니다. **토큰 효율**을 이해하고 올바른 습관을 갖추면, 비용을 대폭 줄이면서도 생산성을 유지할 수 있습니다.

## 비용 구조 이해

Claude API 비용은 두 가지로 구성됩니다:

- **입력 토큰**: Claude에게 전달하는 내용 (프롬프트 + 파일 내용 + 대화 기록)
- **출력 토큰**: Claude가 생성하는 내용 (답변, 코드)

일반적으로 **입력 토큰이 비용의 대부분을 차지합니다.** 컨텍스트가 길어질수록 입력 토큰이 증가합니다.

:::tip 토큰 감각 익히기
- 영문 단어 1개 ≈ 1.3 토큰
- 한국어 1글자 ≈ 1.5~2 토큰
- 코드 100줄 ≈ 1,000~2,000 토큰
- 일반적인 파일 1개 ≈ 500~5,000 토큰
:::

## 비용 증가의 주요 원인

### 1. 불필요하게 긴 대화 세션

대화가 길어질수록 이전 메시지 전체가 매번 입력으로 포함됩니다.

**문제**: 한 세션에서 관련 없는 여러 작업을 계속 진행
**해결**: 작업이 바뀌면 `/clear`로 컨텍스트 초기화

```
> /clear
# 새 작업 시작
```

### 2. 대규모 파일의 불필요한 포함

Claude Code가 전체 파일을 읽지 않아도 되는 상황에서 자동으로 읽는 경우:

**문제**: "프로젝트 전체 분석해줘" → 수백 개 파일을 모두 읽음
**해결**: 범위를 구체적으로 지정

```
# 비효율
> 프로젝트 구조 분석해서 문제점 찾아줘

# 효율
> src/api/ 디렉토리의 에러 핸들링 패턴만 분석해줘
```

### 3. 반복적인 컨텍스트 제공

매번 같은 배경 설명을 반복하는 경우:

**문제**: 매 요청마다 "우리 프로젝트는 Next.js를 쓰고..." 설명
**해결**: `CLAUDE.md`에 한 번 정의

### 4. 저품질 프롬프트로 인한 재시도

모호한 요청 → 잘못된 결과 → 수정 요청 → 반복

**해결**: 처음부터 명확하게 요청

## 실전 비용 절감 전략

### 전략 1: 컨텍스트 최소화

```bash
# 비효율: 광범위한 요청
claude "프로젝트 리팩토링해줘"

# 효율: 구체적인 범위 지정
claude "src/services/user.service.ts 의 getUserById 함수만 최적화해줘"
```

### 전략 2: `/clear` 적극 활용

관련 없는 작업 사이에는 반드시 컨텍스트를 초기화하세요:

```
[기능 A 작업 완료]
> /clear

[기능 B 작업 시작]
> B 기능 구현해줘
```

### 전략 3: 헤드리스 모드로 배치 처리

여러 파일을 처리할 때 반복적인 대화 없이 직접 실행:

```bash
# 여러 파일 처리
for file in src/models/*.ts; do
  claude --print "이 파일에 JSDoc 주석 추가해줘" "$file"
done
```

### 전략 4: 모델 선택 최적화

적합한 모델 선택으로 비용 절감 (자세한 내용은 [멀티 모델 전략](/docs/level-3/multi-model-strategy) 참조):

```bash
# 간단한 작업에 Haiku 사용
claude --model claude-haiku-4-5-20251001 "이 JSON을 TypeScript 인터페이스로 변환해줘"
```

### 전략 5: CLAUDE.md로 반복 설명 제거

매번 설명해야 하는 내용을 `CLAUDE.md`에 정의:

```markdown
# 프로젝트 컨텍스트
- Node.js 20 + TypeScript 5.x
- PostgreSQL (Prisma ORM)
- 에러 처리: AppError 클래스 사용 (src/errors/AppError.ts)
- API 응답 형식: { success, data, error } 구조
- 테스트: Jest + supertest
```

이제 매번 설명하지 않아도 Claude가 이 컨텍스트를 활용합니다.

### 전략 6: 캐시 활용 (API 직접 사용 시)

Anthropic API를 직접 사용하는 경우, **프롬프트 캐싱**으로 반복 입력 비용을 90% 절감할 수 있습니다:

```python
import anthropic

client = anthropic.Anthropic()

# 시스템 프롬프트에 캐시 적용
response = client.messages.create(
    model="claude-sonnet-4-6",
    max_tokens=1024,
    system=[
        {
            "type": "text",
            "text": "당신은 시니어 백엔드 개발자입니다...",
            "cache_control": {"type": "ephemeral"}  # 캐시 적용
        }
    ],
    messages=[{"role": "user", "content": "API 구현해줘"}]
)
```

캐시된 입력 토큰은 일반 토큰 대비 **90% 저렴**합니다.

## 비용 모니터링

### 사용량 확인

```bash
# Claude Code 사용량 확인 (계정 설정에서)
claude /usage
```

Anthropic Console(console.anthropic.com)에서 상세 사용량을 확인할 수 있습니다.

### 비용 예측

일반적인 작업별 예상 토큰:

| 작업 유형 | 예상 입력 토큰 | 예상 출력 토큰 |
|---------|-------------|-------------|
| 간단한 함수 수정 | 1,000~3,000 | 200~500 |
| 새 기능 구현 | 5,000~15,000 | 1,000~3,000 |
| 전체 모듈 리팩토링 | 20,000~50,000 | 3,000~8,000 |
| 코드베이스 분석 | 50,000~200,000 | 2,000~5,000 |

## 비용 vs 생산성 트레이드오프

:::tip 비용보다 중요한 것
비용 절감에 집착해 생산성을 희생하지 마세요. Claude Code에 1,000원을 쓰더라도 그 작업에 10분이 절약된다면 충분히 가치 있습니다. 반복되는 수작업, 지루한 보일러플레이트, 복잡한 디버깅에는 과감하게 활용하세요.
:::

비용을 아껴야 할 작업:
- 이미 방법을 알고 있는 쉬운 작업
- 단순 구글링으로 해결 가능한 정보 조회
- 직접 짜는 것이 더 빠른 10줄 이내 코드

Claude Code를 아낌없이 써야 할 작업:
- 며칠 걸릴 것 같은 복잡한 리팩토링
- 익숙하지 않은 기술 스택 작업
- 버그 원인 파악에 막혀 있을 때
- 반복적이고 지루한 대량 작업

## 체크리스트

비용 효율적인 Claude Code 사용을 위한 점검 목록:

- [ ] `CLAUDE.md`에 프로젝트 컨텍스트 충분히 기술
- [ ] 작업 전환 시 `/clear` 실행 습관화
- [ ] 단순 작업에 Haiku 모델 활용
- [ ] 광범위한 요청 대신 구체적인 범위 지정
- [ ] 관련 없는 파일을 컨텍스트에 포함하지 않도록 주의
- [ ] 실패한 접근법을 반복하지 않고 방향 전환

---

다음 챕터: [테스트 자동화 →](/docs/level-3/test-automation)
